{% extends 'base.html' %}
{% block content %}

<section class="hero has-text-centered is-primary">
	<div class="hero-body">
    	<div class="container">
			<form action="/metrics" method="get" enctype="text/plain">
				<div class="field has-addons">
					<div class="control is-expanded">
				    	<input class="input" name="date" type="date" value="{{ page_data["date"].strftime("%Y-%m-%d") }}" required>
				    </div>
				    <button type="submit" class="button is-link" value="">
				    	<span class="icon">
				    		<i class="fas fa-check"></i>
				    	</span>
				    </button>
				</div>
			</form>
		</div>
	</div>
</section>

<section class="hero has-text-centered">
	<h2 class="title">Food Ratings</h2>
</section>

<div class="chart" id="bargraph">
    <script>
			var daily = {
				x: {{ page_data["menu_items"] | safe }},
				y: {{ page_data["dailies"] | safe }},
				name: 'Daily Rating',
				type: 'bar'
			};

			var total = {
				x: {{ page_data["menu_items"] | safe }},
				y: {{ page_data["totals"] | safe }},
				name: 'Historical Average Rating',
				type: 'bar'
			};

			var data = {daily,total};

			var layout = {barmode: 'group'};

			Plotly.newPlot('bargraph', data, layout);
    </script>
</div>


{% endblock %}
