{% extends "base.html" %}
{% block content %}

<section class="hero has-text-centered is-primary">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        Reviews for <em>{{ page_data["served_item"].menu_item.name }}</em> at {{ page_data["served_item"].dining_hall.name }}
      </h1>
      <h2 class="subtitle">
        <a class="link" href="/contact"> In case of serious concerns, find contact information here.</a>
      </h2>
    </div>
  </div>
</section>

{% if "warning" in request.args %}
{% if request.args["warning"] == "already_reviewed" %}
<div class="notification is-danger">You have already reviewed this item for this meal.</div>
{% endif %}
{% endif %}

<br>

<div class="columns">
  <div class="column"> <em>User</em> </div>
  <div class="column"> <em>Rating</em>  </div>
  <div class="column"> <em>Comment</em> </div>
  <div class="column"> <em>Comment</em> </div>
</div>
{% for review in page_data["reviews"] %}
  <div class="columns">
    <div class="column"> {{ review.reviewer.name }} </div>
    <div class="column"> {{ review.rating }} </div>
    <div class="column"> {{ review.comments }} </div>
    <div class="column">
      <form action="/actions/delete_review" method="post" enctype="multipart/form-data">
        <input type="hidden" name="review_id" value="{{ review.review_id }}">
        <input type="submit" class="button is-small is-danger" value="Delete Review">
      </form>
    </div>
  </div>
{% endfor %}

{% endblock %}
